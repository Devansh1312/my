{% extends 'base1.html' %}

{% load static %}

{% block css %}
<!-- Plugins css start-->

<!-- Plugins css Ends-->
{% endblock %}

{% block title %} Future Star || News{% endblock %}

{% block content %}

<!-- Page Banner Start -->
<section class="page-banner-area overlay pt-220 rpt-150 pb-170 rpb-100 rel z-1 bgs-cover text-center" style="background-image: url('{% static 'frontend/assets/images/banner/banner-bg.jpg' %}');">
    <div class="container">
        <div class="banner-inner rpt-10">
            <h2 class="page-title wow fadeInUp delay-0-2s">Explore Our Latest News</h2>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.</p>                    
        </div>
    </div>
</section>
<!-- Page Banner End -->

<!-- Language Switcher -->
<form id="language-form" method="POST" action="">
    {% csrf_token %}
    <select id="language-selector" name="language">
        <option style="color: black;" value="en" {% if current_language == 'en' %}selected{% endif %}>English</option>
        <option style="color: black;" value="ar" {% if current_language == 'ar' %}selected{% endif %}>Arabic</option>
    </select>
    <button type="submit" id="change-language-btn">Change Language</button>
</form>

<!-- Blog Page Area start -->
<section class="blog-page-area py-130 rpy-100 rel z-1">
    <div class="container container-1290">
        <div class="row">
            {% for news in news %}
            <div class="col-xl-4 col-md-6">
                <div class="blog-item wow fadeInUp delay-0-2s">
                    <div class="image">
                        <img src="{{ news.image.url }}" alt="Blog">
                    </div>
                    <ul class="blog-meta">
                        <li>
                            <i class="far fa-calendar-alt"></i>                                 
                            <span>{{ news.news_date }}</span>
                        </li>
                    </ul>
                    <h4>
                        <a class="read-more" href="#" onclick="document.getElementById('news-detail-form-{{ news.id }}').submit(); return false;">
                           {% if current_language == "ar" %}
                           {{ news.title_ar }}
                           {% else %}
                           {{ news.title_en }}
                           {% endif %}
                        </a>
                    </h4>
                    <a class="read-more" href="#" onclick="document.getElementById('news-detail-form-{{ news.id }}').submit(); return false;">
                        Read More <i class="far fa-arrow-right"></i>
                    </a>
                    
                    <form id="news-detail-form-{{ news.id }}" action="{% url 'news-detail' %}" method="post" style="display: none;">
                        {% csrf_token %}
                        <input type="hidden" name="id" value="{{ news.id }}">
                    </form>
                    
                </div>
            </div>
            {% endfor %}
            <div class="col-lg-12">
                <ul class="pagination mt-10 flex-wrap justify-content-center wow fadeInUp delay-0-2s">
                    {% if news.has_previous %}
                    <li class="page-item">
                        <a class="page-link" href="?page={{ news.previous_page_number }}"><i class="fas fa-angle-left"></i></a>
                    </li>
                    {% else %}
                    <li class="page-item disabled">
                        <span class="page-link"><i class="fas fa-angle-left"></i></span>
                    </li>
                    {% endif %}
            
                    {% for num in news.paginator.page_range %}
                    {% if news.number == num %}
                    <li class="page-item active">
                        <span class="page-link">{{ num }}<span class="sr-only">(current)</span></span>
                    </li>
                    {% else %}
                    <li class="page-item">
                        <a class="page-link" href="?page={{ num }}">{{ num }}</a>
                    </li>
                    {% endif %}
                    {% endfor %}
            
                    {% if news.has_next %}
                    <li class="page-item">
                        <a class="page-link" href="?page={{ news.next_page_number }}"><i class="fas fa-angle-right"></i></a>
                    </li>
                    {% else %}
                    <li class="page-item disabled">
                        <span class="page-link"><i class="fas fa-angle-right"></i></span>
                    </li>
                    {% endif %}
                </ul>
            </div>
            
        </div>
    </div>
    <div class="bg-lines">
        <span></span><span></span>
        <span></span><span></span>
     </div>
</section>
<!-- Blog Page Area end -->
{% endblock %}

{% block scriptcontent %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Set default language from localStorage or 'en' by default
        const currentLanguage = localStorage.getItem('language') || 'en';
        document.getElementById('language-selector').value = currentLanguage;

        // On language change, update localStorage
        document.getElementById('change-language-btn').addEventListener('click', function() {
            const selectedLanguage = document.getElementById('language-selector').value;
            localStorage.setItem('language', selectedLanguage);
        });
    });
</script>
{% endblock %}

{% block script %} 
<script>new WOW().init();</script>
{% endblock %}
